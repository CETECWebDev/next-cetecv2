"use client";

import { useState } from "react";
import { useForm, FormProvider } from "react-hook-form";

import LoginInputForm from "./LoginInputForm";
import PrivateCode from "./PrivateCode";
import UserDetailsForm from "./UserDetailsForm";

export default function AuthPage({ onClose }) {
  const [step, setStep] = useState(1);

  const methods = useForm({
    mode: "onTouched",
    defaultValues: {
      identifier: "",
      code: "",
      firstName: "",
      lastName: "",
      contact: "",
      loginMethod: "mobile",
    },
  });

  const handleNext = (data) => {
    if (step < 3) {
      setStep(step + 1);
    } else {
      alert("اطلاعات با موفقیت ثبت شد!");
    }
  };

  const toggleLoginMethod = () => {
    const current = methods.getValues("loginMethod");
    methods.setValue("loginMethod", current === "mobile" ? "email" : "mobile");
  };

  return (
    <div
      className="min-h-screen flex items-center justify-center px-4 bg-[var(--bg-navbar)] dark:bg-[var(--bg-navbar)] transition-colors duration-500"
      style={{ fontFamily: "'peyda', sans-serif" }}
    >
      <div className="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-8 w-full max-w-md transition-all duration-300 relative">
        {/* دکمه ضربدر بالا سمت راست */}
        <button
          type="button"
          onClick={onClose}
          aria-label="بستن فرم"
          className="absolute top-4 right-4 text-[var(--text-navbar)] dark:text-white hover:text-[var(--hover-text-navbar)] transition text-2xl font-bold"
        >
          &times;
        </button>

        {/* لوگو وسط بالا */}
        <div className="flex justify-center mb-8">
           <svg width="150" height="50" viewBox="0 0 150 50" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-28 h-auto object-contain">
<g clip-path="url(#clip0_261_3429)">
<path d="M135.279 50C135.13 49.8206 134.9 49.8695 134.714 49.8043C134.032 49.5678 133.737 49.1764 133.705 48.3977C134.068 48.4304 134.387 48.357 134.625 48.8299C134.904 49.3721 135.514 49.2702 136.026 49.1968C136.515 49.1275 136.846 48.7443 136.91 48.2265C136.943 47.9697 136.914 47.7087 136.914 47.3867C136.406 47.8637 135.828 48.0553 135.174 47.9167C134.25 47.725 133.798 47.0646 133.6 46.2003C133.442 45.5194 133.491 44.8426 133.769 44.1944C134.318 42.9264 135.748 42.5799 136.814 43.4524C136.858 43.4891 136.902 43.5258 136.995 43.5991C137.011 43.3994 137.024 43.2608 137.04 43.1099C137.27 43.0406 137.504 43.0569 137.787 43.1099C137.734 44.8834 137.9 46.6528 137.686 48.4141C137.589 49.2172 136.971 49.7472 136.099 49.894C135.986 49.9144 135.832 49.8247 135.764 49.9959H135.279V50ZM137.015 45.4786C137.015 45.1525 136.975 44.8304 136.854 44.5287C136.636 43.9783 136.172 43.644 135.639 43.6562C135.126 43.6685 134.682 44.0028 134.496 44.5491C134.278 45.1851 134.298 45.8292 134.52 46.4571C134.702 46.9667 135.154 47.2643 135.671 47.2684C136.188 47.2684 136.628 46.979 136.838 46.4816C136.971 46.1636 137.011 45.8252 137.015 45.4827V45.4786Z" fill="currentColor"/>
<path d="M150 46.873C149.499 47.8229 148.692 48.1328 147.675 48.0431C146.718 47.9615 146.205 47.5253 145.955 46.506C146.201 46.4612 146.447 46.4123 146.681 46.3715C147.134 47.2562 147.529 47.4886 148.345 47.3541C148.736 47.2888 149.063 47.1013 149.112 46.665C149.164 46.2125 148.801 46.1065 148.474 46.0046C147.981 45.8537 147.477 45.7396 146.992 45.5683C146.37 45.3523 146.08 44.9201 146.092 44.3289C146.108 43.7582 146.447 43.3097 147.033 43.1058C147.618 42.902 148.203 42.9224 148.789 43.1099C149.35 43.2934 149.677 43.6766 149.75 44.2841C149.52 44.4105 149.269 44.4268 149.019 44.4186C148.672 43.6929 148.094 43.4565 147.356 43.7215C147.093 43.8152 146.899 43.9661 146.891 44.2719C146.883 44.5695 147.093 44.7122 147.327 44.7896C147.788 44.9405 148.248 45.0791 148.716 45.1933C149.33 45.3441 149.79 45.658 150 46.2818V46.8689V46.873Z" fill="currentColor"/>
<path d="M0.15332 38.4418V36.2402H149.794V38.4418H0.15332Z" fill="#2563eb"/>
<path d="M41.5215 9.18134C41.7032 9.18134 41.8485 9.18134 41.9898 9.18134C47.6544 9.18134 53.319 9.18134 58.9835 9.18134C61.3293 9.18134 63.0816 10.4371 63.663 12.5122C63.7639 12.871 63.8446 13.2379 63.8043 13.6701H45.995V18.1792H63.7922V22.6802H46.0071V27.1934H63.7679C63.9375 28.7386 62.8272 30.4998 61.2728 31.25C60.5703 31.5884 59.8233 31.7066 59.0683 31.7107C53.323 31.7229 47.5777 31.7189 41.8324 31.7148C41.7395 31.7148 41.6426 31.7025 41.5215 31.6944V9.18134Z" fill="currentColor"/>
<path d="M86.2042 13.6864C86.0669 11.6357 87.795 9.58089 89.8702 9.27512C90.3184 9.20988 90.7665 9.17727 91.2187 9.17727C96.7864 9.17727 102.35 9.17727 107.918 9.17727H108.459V31.6455C108.313 31.7555 108.16 31.7107 108.023 31.7107C102.358 31.7107 96.6976 31.7148 91.033 31.7107C88.6913 31.7107 86.9511 30.4917 86.3455 28.4532C86.2769 28.2208 86.2284 27.9803 86.1921 27.7397C86.1679 27.5848 86.1881 27.4217 86.1881 27.2179H103.977V22.7047H86.1881V18.1915H103.985V13.6823H86.2042V13.6864Z" fill="currentColor"/>
<path d="M90.0437 0.203849C87.6212 0.766471 86.3575 2.24234 86.1193 4.68444H80.9796V9.16504H77.2247V31.6047C77.0067 31.7555 76.821 31.7066 76.6514 31.7066C75.5694 31.7107 74.4873 31.7066 73.4093 31.7066C72.9679 31.7066 72.7472 31.4905 72.7472 31.0584C72.7472 25.9499 72.7472 20.8374 72.7472 15.729V9.7725C72.7472 9.59719 72.7472 9.41781 72.7472 9.19765H69.0408V4.68852H63.8849C63.6508 2.13633 62.1811 0.705317 59.9888 0.199772H90.0518L90.0437 0.203849Z" fill="#2563eb"/>
<path d="M112.98 31.7189V27.2219H130.786V22.7006H112.989V18.2567C113.11 18.1385 113.263 18.1915 113.4 18.1915C119.081 18.1915 124.758 18.1833 130.438 18.1915C132.792 18.1915 134.537 19.4431 135.122 21.5142C135.235 21.9097 135.292 22.3051 135.287 22.7169C135.287 24.1968 135.292 25.6768 135.287 27.1567C135.275 29.5703 133.523 31.4742 131.145 31.6618C130.681 31.6985 130.212 31.7189 129.748 31.7189C124.342 31.7189 118.94 31.7189 113.534 31.7189H112.985H112.98Z" fill="currentColor"/>
<path d="M36.9995 18.1874V22.6802H19.1942V27.1934H36.9833V31.6536C36.8703 31.7678 36.7168 31.7148 36.5796 31.7148C30.8988 31.7148 25.2222 31.7229 19.5414 31.7148C17.2118 31.7148 15.4676 30.4754 14.8701 28.4328C14.7449 28.0088 14.6965 27.5766 14.7005 27.1323C14.7005 25.6849 14.6965 24.2376 14.7005 22.7903C14.7126 20.3033 16.4245 18.4442 18.8914 18.2404C19.275 18.2078 19.6626 18.1915 20.0502 18.1915C25.5048 18.1915 30.9554 18.1915 36.41 18.1915C36.5836 18.1915 36.7612 18.1915 36.9954 18.1915L36.9995 18.1874Z" fill="currentColor"/>
<path d="M6.29821 19.8752V23.8136H10.2065V26.0763H6.29418V30.0269H4.08568V26.0926H0.157227V23.8462H4.05338V19.8793H6.29821V19.8752Z" fill="#2563eb"/>
<path d="M139.773 23.8462H149.794V26.0478H139.773V23.8462Z" fill="#2563eb"/>
<path d="M41.1501 44.8549V47.1461H45.1553C45.2643 47.4111 45.1997 47.6517 45.2118 47.9207H40.2578V41.2467H45.0139V42.001H41.1622V44.0639H44.7596C44.8282 44.3534 44.8161 44.5858 44.7798 44.8589H41.1501V44.8549Z" fill="currentColor"/>
<path d="M5.89083 43.0651C5.6284 43.1344 5.37 43.1996 5.08334 43.273C5.04296 43.1915 5.00663 43.1262 4.97433 43.0528C4.57462 42.1559 4.08608 41.8461 3.12517 41.8827C2.24904 41.9113 1.55863 42.3964 1.28004 43.2078C0.993383 44.0435 0.977233 44.8997 1.21544 45.7518C1.49403 46.7384 2.16829 47.2725 3.13728 47.297C4.10627 47.3214 4.72804 46.8607 5.07123 45.8619C5.09545 45.7885 5.12775 45.7151 5.16812 45.605C5.44267 45.6743 5.71722 45.7477 5.98773 45.817C5.70915 47.4274 4.27584 48.3366 2.56396 48.0186C1.56267 47.8351 0.872259 47.2644 0.484662 46.3226C0.0849528 45.3441 0.0243908 44.3289 0.302976 43.3138C0.799585 41.4995 2.88292 40.57 4.57058 41.3894C5.23272 41.7115 5.66877 42.2578 5.88276 43.0691L5.89083 43.0651Z" fill="currentColor"/>
<path d="M114.943 47.9371H114.127C114.127 47.3214 114.127 46.7262 114.127 46.1269C114.127 45.6703 114.139 45.2177 114.115 44.7611C114.079 44.0639 113.804 43.75 113.227 43.6888C112.617 43.6277 112.08 44.0028 111.915 44.598C111.785 45.0628 111.85 45.5357 111.842 46.0046C111.83 46.6365 111.842 47.2684 111.842 47.9248H111.042V41.2386H111.814V43.5176C112.032 43.5176 112.116 43.3545 112.242 43.2771C112.867 42.8857 113.521 42.8571 114.176 43.167C114.785 43.4565 114.931 44.0191 114.935 44.6306C114.943 45.7151 114.935 46.8037 114.935 47.9289L114.943 47.9371Z" fill="currentColor"/>
<path d="M24.1723 45.7273H20.5991C20.5991 46.7996 21.229 47.4397 22.1576 47.3704C22.5169 47.3418 22.8803 47.2073 23.0014 46.8852C23.2315 46.2777 23.6272 46.3715 24.0754 46.5101C23.8856 47.7291 22.6623 48.2347 21.4833 48.0104C20.6112 47.8433 20.05 47.3133 19.828 46.4408C19.6745 45.8333 19.6745 45.2177 19.8401 44.6102C20.1308 43.5339 20.9867 42.9183 22.1091 42.9754C23.1225 43.0243 23.9058 43.7255 24.0956 44.7774C24.148 45.0628 24.148 45.3563 24.1763 45.7273H24.1723ZM23.2477 45.022C23.2033 44.1169 22.6582 43.5991 21.8588 43.6521C21.1482 43.697 20.6274 44.2882 20.6677 45.022H23.2477Z" fill="currentColor"/>
<path d="M84.1853 45.7192H80.6122C80.6243 46.5631 81.0078 47.1502 81.6458 47.3296C82.3523 47.5294 82.8328 47.2644 83.3496 46.3796C83.5918 46.4163 83.8421 46.449 84.0965 46.4856C83.8946 47.7903 82.6349 48.2021 81.5569 48.0186C80.6889 47.8718 80.1035 47.3622 79.8612 46.4897C79.6674 45.7966 79.6876 45.1036 79.9056 44.4268C80.2246 43.4483 81.1572 42.8816 82.2231 42.9795C83.2446 43.0732 84.0036 43.8397 84.1409 44.9201C84.1732 45.1606 84.1651 45.4053 84.1813 45.7192H84.1853ZM80.6647 45.0098H83.2769C83.2406 44.1781 82.7682 43.6725 82.0374 43.6522C81.2662 43.6318 80.7293 44.1495 80.6647 45.0098Z" fill="currentColor"/>
<path d="M145.252 45.7151H141.703C141.671 46.5223 142.074 47.142 142.72 47.3255C143.427 47.5253 143.895 47.2725 144.416 46.4C144.674 46.3715 144.921 46.453 145.171 46.4979C144.985 47.6191 143.871 48.2714 142.587 48.0145C141.683 47.8311 141.073 47.2154 140.891 46.3022C140.802 45.8537 140.786 45.4053 140.863 44.9486C141.089 43.6399 141.989 42.8898 143.249 42.9754C144.384 43.0528 145.187 43.9457 145.248 45.2055C145.256 45.3523 145.248 45.499 145.248 45.7151H145.252ZM144.351 45.0179C144.331 44.1536 143.798 43.6195 143.007 43.6522C142.268 43.6807 141.747 44.2515 141.771 45.0179H144.355H144.351Z" fill="currentColor"/>
<path d="M11.1553 45.7233H7.65886C7.61041 46.506 7.97379 47.1013 8.61574 47.3092C9.28193 47.5253 9.83506 47.297 10.2227 46.6039C10.4851 46.135 10.8162 46.5631 11.1553 46.4571C11.0342 47.032 10.7596 47.4274 10.3317 47.7128C8.9347 48.6464 7.04517 47.8066 6.79888 46.1391C6.73832 45.7192 6.73428 45.2911 6.811 44.8752C7.02902 43.6644 7.889 42.9468 9.07198 42.9713C10.2065 42.9958 10.9978 43.7581 11.1634 44.9935C11.1916 45.2136 11.2482 45.4379 11.1634 45.7273L11.1553 45.7233ZM7.67098 45.0098H10.2873C10.2388 44.1536 9.75835 43.6562 9.01142 43.6521C8.25641 43.6521 7.73558 44.1699 7.67098 45.0098Z" fill="currentColor"/>
<path d="M104.522 46.3756C104.781 46.4163 105.019 46.453 105.257 46.4897C105.16 47.3418 104.433 47.9778 103.493 48.0431C102.52 48.1124 101.696 47.8514 101.203 46.93C100.707 45.9964 100.832 44.4798 101.462 43.7378C102.027 43.0692 102.77 42.8612 103.602 43.0162C104.417 43.167 104.95 43.6725 105.204 44.4676C105.33 44.8549 105.382 45.2544 105.342 45.707H101.825C101.732 46.4571 102.116 47.089 102.754 47.3092C103.476 47.5538 103.993 47.2929 104.522 46.3797V46.3756ZM104.466 45.022C104.353 44.0965 103.876 43.6318 103.109 43.6522C102.378 43.6766 101.882 44.1985 101.833 45.022H104.466Z" fill="currentColor"/>
<path d="M59.8069 45.7192H56.2741C56.2458 46.5264 56.6213 47.1176 57.2552 47.3173C57.9214 47.5253 58.4422 47.2929 58.8621 46.5957C59.0196 46.3348 59.0236 46.3348 59.7463 46.5223C59.5727 47.5987 58.4705 48.2714 57.1179 47.9982C56.2216 47.8188 55.6806 47.2521 55.4706 46.3552C55.3293 45.7559 55.3455 45.1566 55.5029 44.5695C55.7775 43.538 56.6657 42.9224 57.7639 42.9713C58.7652 43.0161 59.5445 43.7011 59.7463 44.7244C59.8069 45.0261 59.8634 45.3319 59.8069 45.7192ZM58.9388 45.0139C58.8298 44.1006 58.3615 43.6318 57.5944 43.6521C56.8636 43.6725 56.371 44.1862 56.3024 45.0139H58.9388Z" fill="currentColor"/>
<path d="M69.1336 45.7192H65.6211C65.5322 46.4571 65.94 47.1176 66.59 47.3174C67.3047 47.5375 67.8255 47.2603 68.2939 46.4082C68.5644 46.3633 68.8228 46.4571 69.0892 46.506C68.847 47.5171 68.1122 48.0553 66.9938 48.0512C65.8593 48.0471 65.0356 47.4193 64.8014 46.3756C64.6722 45.813 64.6763 45.2463 64.8055 44.6836C65.0598 43.5788 65.9764 42.9061 67.123 42.9713C68.2171 43.0365 69.0125 43.8438 69.1336 45.0342C69.1538 45.2422 69.1336 45.4501 69.1336 45.7192ZM65.6332 45.0139H68.2535C68.197 44.1536 67.7125 43.6522 66.9615 43.6522C66.2146 43.6522 65.7058 44.1536 65.6332 45.0139Z" fill="currentColor"/>
<path d="M125.606 45.499C125.602 47.3785 124.249 48.4752 122.578 47.9411C122.517 47.9207 122.456 47.8963 122.4 47.8718C121.233 47.3785 120.716 45.7151 121.29 44.2922C121.738 43.1792 123.066 42.6615 124.249 43.1425C125.145 43.5054 125.606 44.3045 125.606 45.5031V45.499ZM121.903 45.4746C121.907 45.7396 121.948 45.9964 122.008 46.2492C122.178 46.9464 122.67 47.3663 123.333 47.3704C123.999 47.3785 124.503 46.979 124.681 46.2777C124.794 45.8333 124.794 45.3767 124.721 44.9242C124.604 44.1903 124.075 43.6848 123.409 43.6562C122.703 43.6277 122.166 44.0762 121.996 44.8508C121.952 45.0546 121.932 45.2666 121.903 45.4746Z" fill="currentColor"/>
<path d="M30.0063 45.1484C30.0063 43.6685 31.3064 42.5921 32.9618 43.0651C32.9779 43.0691 32.9941 43.0692 33.0102 43.0773C33.8298 43.3627 34.3426 43.9416 34.4637 44.7978C34.6131 45.8333 34.6171 46.877 33.6764 47.5946C32.9053 48.1817 32.0251 48.2306 31.1691 47.8025C30.2486 47.3377 30.0063 46.4775 30.0104 45.1566L30.0063 45.1484ZM33.6926 45.4256C33.7006 45.1973 33.6522 44.8956 33.5472 44.6021C33.3332 44.0028 32.8245 43.644 32.227 43.6562C31.6415 43.6685 31.1691 44.0191 30.9753 44.6184C30.7735 45.2381 30.7815 45.866 30.9955 46.4816C31.1934 47.0442 31.6738 47.3663 32.2512 47.3704C32.8406 47.3744 33.2928 47.0687 33.5189 46.506C33.6481 46.188 33.6926 45.8496 33.6966 45.4256H33.6926Z" fill="currentColor"/>
<path d="M132.865 45.5316C132.853 47.3826 131.512 48.4589 129.849 47.9452C129.772 47.9207 129.699 47.8922 129.623 47.8596C128.48 47.354 127.984 45.7192 128.537 44.3045C128.969 43.2078 130.269 42.6778 131.448 43.114C132.384 43.4605 132.869 44.2922 132.861 45.5316H132.865ZM132.029 45.446C131.997 45.2055 132.009 44.9282 131.916 44.6632C131.694 44.0272 131.205 43.6522 130.588 43.6603C129.954 43.6685 129.453 44.0843 129.276 44.7448C129.134 45.2748 129.138 45.8048 129.284 46.3307C129.461 46.9708 129.954 47.3622 130.572 47.3744C131.214 47.3867 131.686 47.032 131.904 46.3919C132.005 46.0943 132.005 45.7885 132.025 45.4501L132.029 45.446Z" fill="currentColor"/>
<path d="M90.1285 47.933H89.3291V43.1058C89.5431 43.0406 89.7732 43.0651 90.0235 43.0936C90.0357 43.273 90.0437 43.432 90.0599 43.6358C90.3788 43.4035 90.6494 43.1384 91.0289 43.0365C92.2563 42.7104 93.1808 43.3464 93.2212 44.6143C93.2535 45.6988 93.2293 46.7873 93.2293 47.9044C92.9709 47.99 92.7165 47.9411 92.3976 47.9411C92.3976 47.2766 92.3976 46.6161 92.3976 45.9556C92.3976 45.5479 92.4016 45.1443 92.3895 44.7366C92.3693 44.1047 92.123 43.7948 91.582 43.7011C91.0087 43.6032 90.4475 43.909 90.2496 44.4227C90.1245 44.7489 90.1366 45.0913 90.1326 45.4338C90.1285 46.2573 90.1326 47.085 90.1326 47.9289L90.1285 47.933Z" fill="currentColor"/>
<path d="M120.139 47.933H119.307C119.307 47.142 119.307 46.3511 119.307 45.5602C119.307 45.2829 119.311 45.0057 119.299 44.7285C119.275 44.1006 119.017 43.7867 118.48 43.697C117.923 43.6032 117.369 43.8968 117.168 44.386C117.034 44.7081 117.034 45.0546 117.034 45.393C117.03 46.2206 117.034 47.0483 117.034 47.9126H116.235V43.0895H116.929C116.945 43.2648 116.958 43.432 116.982 43.6685C117.6 42.9876 118.314 42.8245 119.122 43.0651C119.647 43.22 120.01 43.5706 120.074 44.121C120.224 45.3808 120.115 46.6487 120.143 47.9289L120.139 47.933Z" fill="currentColor"/>
<path d="M12.2417 43.0855H12.8796C13.025 43.2363 12.9038 43.4361 13.0007 43.6399C13.5579 43.0569 14.2241 42.8368 15.0033 43.0447C15.6897 43.2281 16.0329 43.5951 16.0975 44.2963C16.2065 45.4949 16.1136 46.6977 16.15 47.9248H15.3102C15.3102 46.877 15.3102 45.8415 15.3102 44.8059C15.3102 44.3534 15.2052 43.9498 14.7409 43.7745C14.2685 43.5951 13.8163 43.6848 13.4287 44.0191C13.1663 44.2474 13.0734 44.5613 13.0653 44.8916C13.0492 45.7192 13.0452 46.5509 13.0371 47.3826C13.0371 47.5579 13.0371 47.7332 13.0371 47.933H12.2457V43.0895L12.2417 43.0855Z" fill="currentColor"/>
<path d="M99.2086 47.9371H98.3244V42.0173H96.1724C96.0755 41.736 96.136 41.4995 96.1239 41.2386H101.373V41.9928H99.2086V47.9371Z" fill="currentColor"/>
<path d="M74.0835 47.933H73.276C73.276 47.3704 73.276 46.824 73.276 46.2777C73.276 45.7396 73.2841 45.2014 73.2478 44.6673C73.2034 44.0354 72.9248 43.7541 72.3757 43.6888C71.7983 43.6236 71.2533 43.9661 71.0877 44.4961C70.9868 44.8263 70.9828 45.1688 70.9868 45.5113C70.9868 46.3063 70.9868 47.1013 70.9868 47.9248H70.1914V43.0855H70.8697C70.8858 43.2567 70.898 43.4279 70.9181 43.6481C71.2492 43.3953 71.5359 43.1262 71.9356 43.0243C73.1711 42.7226 74.0714 43.3912 74.0835 44.6592C74.0956 45.7314 74.0835 46.8037 74.0835 47.933Z" fill="currentColor"/>
<path d="M50.2465 47.8922C49.5117 48.145 49.112 47.8188 48.8091 47.2358C48.6073 46.8526 48.3327 46.506 48.0622 46.0983C47.7756 46.5142 47.4687 46.873 47.2507 47.2847C46.9438 47.8759 46.5118 48.0961 45.8174 47.8963C46.3826 47.0809 46.9479 46.2696 47.5333 45.4256C47.0165 44.6755 46.4916 43.9212 45.9668 43.1588C46.6814 42.9428 46.8712 43.0039 47.2466 43.5747C47.4929 43.9498 47.7392 44.3208 48.0178 44.7407C48.2681 44.3819 48.5386 44.0721 48.7203 43.7174C49.0272 43.1262 49.4713 42.9265 50.1455 43.1262C49.7579 43.6848 49.3744 44.2352 48.9908 44.7856C48.6921 45.2123 48.6867 45.6336 48.9747 46.0494C49.3946 46.6569 49.8145 47.2684 50.2465 47.8922Z" fill="currentColor"/>
<path d="M54.1787 46.1676C54.4411 46.2084 54.6591 46.2451 54.9215 46.2859C54.8489 46.9627 54.538 47.46 53.9808 47.7903C52.8261 48.4711 51.3121 47.8922 50.9043 46.608C50.6499 45.8048 50.6741 45.0016 50.981 44.2188C51.3161 43.3627 52.168 42.8938 53.1774 42.9754C54.0777 43.0488 54.6551 43.5665 54.8489 44.5002C54.6187 44.545 54.3846 44.5899 54.215 44.6225C54.0454 44.5939 54.0495 44.5042 54.0212 44.4309C53.8355 43.9457 53.5084 43.6522 52.9674 43.6562C52.4143 43.6603 51.9903 43.9049 51.7844 44.4227C51.4978 45.1443 51.5059 45.8863 51.7764 46.612C51.9742 47.142 52.4264 47.3989 53.0038 47.3744C53.5286 47.354 53.8678 47.085 54.0616 46.5346C54.0979 46.4286 54.1302 46.3226 54.1787 46.1717V46.1676Z" fill="currentColor"/>
<path d="M109.561 46.1758C109.803 46.2125 110.037 46.2451 110.268 46.2818C110.211 47.1665 109.613 47.8474 108.758 48.0227C107.789 48.2224 106.815 47.8066 106.42 46.9586C105.964 45.976 105.988 44.9649 106.464 43.9946C106.84 43.2281 107.829 42.8327 108.753 43.008C109.573 43.1629 110.078 43.6766 110.207 44.5083C109.973 44.5532 109.739 44.5939 109.476 44.6429C109.307 44.1536 109.068 43.7418 108.515 43.6603C107.837 43.5665 107.26 43.9538 107.062 44.6632C106.908 45.2218 106.912 45.7926 107.05 46.3511C107.207 46.9993 107.639 47.354 108.237 47.3704C108.875 47.3907 109.23 47.1135 109.46 46.4245C109.484 46.3511 109.513 46.2777 109.549 46.1758H109.561Z" fill="currentColor"/>
<path d="M79.2068 44.5002C78.9727 44.545 78.7425 44.5899 78.472 44.6429C78.2944 44.1251 78.0279 43.697 77.4223 43.6562C76.7844 43.6114 76.2676 43.962 76.0697 44.6021C75.884 45.2055 75.888 45.8211 76.0617 46.4286C76.2353 47.0483 76.6915 47.3826 77.3052 47.3785C77.8947 47.3744 78.254 47.0809 78.4478 46.4571C78.472 46.3796 78.4963 46.3063 78.5205 46.2206C78.791 46.1676 79.0332 46.2573 79.2755 46.3022C79.114 47.3296 78.464 47.9737 77.5394 48.0512C76.4694 48.1409 75.5933 47.6354 75.2824 46.6895C75.0119 45.8659 75.024 45.022 75.343 44.2107C75.6821 43.3505 76.5825 42.8775 77.5959 42.9876C78.468 43.0855 79.0252 43.6032 79.2028 44.5083L79.2068 44.5002Z" fill="currentColor"/>
<path d="M37.7865 41.2386C37.738 41.471 37.6977 41.6748 37.6532 41.8705C36.5026 41.9194 36.4501 41.9765 36.5268 43.0569H37.3585C37.4877 43.273 37.4393 43.4646 37.4191 43.6644C37.1445 43.7989 36.8457 43.6725 36.5187 43.7582V47.933H35.687V43.8112C35.4488 43.6481 35.2025 43.7948 34.9925 43.6807C34.936 43.4972 34.9441 43.3097 34.9925 43.0977C35.2146 43.0814 35.4326 43.0691 35.6466 43.0528C35.8566 41.2386 36.3612 40.8023 37.7865 41.2427V41.2386Z" fill="currentColor"/>
<path d="M16.9492 43.7011V43.0936C17.1349 43.0773 17.3045 43.0651 17.5306 43.0488C17.5306 42.7144 17.5024 42.3761 17.5387 42.0417C17.5871 41.6218 18.0393 41.6504 18.326 41.3527V42.9876C18.6127 43.1425 18.8791 43.008 19.1375 43.1018C19.2102 43.2852 19.1739 43.4728 19.1537 43.6644C18.9155 43.7948 18.6409 43.6481 18.3704 43.7785C18.3704 44.7896 18.3583 45.8048 18.3744 46.824C18.3825 47.35 18.8105 47.2277 19.1375 47.244C19.2223 47.46 19.2708 47.672 19.2546 47.9126C19.0447 48.0145 18.8226 48.0267 18.6005 48.0186C17.8899 47.99 17.5629 47.6884 17.5427 46.9708C17.5185 46.0779 17.5306 45.1851 17.5306 44.2922C17.5306 44.1169 17.5306 43.9375 17.5306 43.7378C17.3287 43.7255 17.1592 43.7133 16.9492 43.697V43.7011Z" fill="currentColor"/>
<path d="M63.6911 47.933H62.9199V41.2467H63.6911V47.933Z" fill="currentColor"/>
<path d="M60.8447 41.2386H61.6199V47.9167H60.8447V41.2386Z" fill="currentColor"/>
<path d="M25.9689 47.9411H25.1978V43.1099C25.3956 43.0284 25.6177 43.0814 25.8599 43.0814C25.876 43.2648 25.8922 43.4361 25.9205 43.7459C26.409 42.902 27.0146 42.7838 27.7575 43.22C27.7131 43.4809 27.6162 43.7092 27.4951 43.9294C26.4574 43.7174 26.1183 43.9294 26.0174 44.9935C25.9406 45.7803 25.981 46.5835 25.9689 47.3785C25.9689 47.5538 25.9689 47.7291 25.9689 47.9411Z" fill="currentColor"/>
<path d="M126.587 41.2304H127.334V47.9126C127.112 47.9941 126.861 47.9411 126.587 47.9452V41.2304Z" fill="currentColor"/>
<path d="M139.805 47.933H139.05V43.1099C139.301 43.0365 139.539 43.0732 139.805 43.0854V47.933Z" fill="currentColor"/>
<path d="M88.0088 47.933H87.2578V43.0977H88.0088V47.933Z" fill="currentColor"/>
<path d="M139.042 41.2264H139.789C139.874 41.524 139.829 41.8216 139.821 42.1437H139.07C138.978 41.8583 139.022 41.5607 139.042 41.2264Z" fill="currentColor"/>
<path d="M87.2619 41.2304H87.9967C88.0693 41.5321 88.0451 41.8297 88.0128 42.1477H87.2578V41.2304H87.2619Z" fill="currentColor"/>
</g>
<defs>
<clipPath id="clip0_261_3429">
<rect width="150" height="50" fill="white"/>
</clipPath>
</defs>
</svg> 
        </div>

        {/* عنوان و توضیحات */}
        <h2
          className="text-2xl font-semibold text-[var(--text-navbar)] mb-2 text-right"
          dir="rtl"
        >
          {step === 1
            ? "ورود / ثبت‌نام"
            : step === 2
            ? "کد تایید را وارد کنید"
            : "اطلاعات کاربر"}
        </h2>
        {step === 1 && (
          <p
            className="text-sm mb-6 text-[var(--text-navbar)] text-right"
            dir="rtl"
          >
            شماره تماس یا ایمیل خود را وارد کنید.
          </p>
        )}

       
        {step === 1 && (
          <div className="flex justify-end mb-4">
            <button
              type="button"
              onClick={toggleLoginMethod}
              className="text-[var(--hover-text-navbar)] hover:underline font-semibold transition"
              dir="rtl"
            >
              {methods.watch("loginMethod") === "mobile"
                ? "ورود با ایمیل"
                : "ورود با موبایل"}
            </button>
          </div>
        )}

        <FormProvider {...methods}>
          <form
            onSubmit={methods.handleSubmit(handleNext)}
            className="space-y-6"
            dir="rtl"
          >
            {step === 1 && <LoginInputForm />}
            {step === 2 && <PrivateCode />}
            {step === 3 && <UserDetailsForm />}

            <button
              type="submit"
              className="w-full py-3 rounded-lg bg-[var(--bg-login-btn)] text-[var(--text-login-btn)] font-semibold transition-colors hover:bg-[var(--hover-bg-login-btn)] hover:text-[var(--hover-text-login-btn)] shadow-md"
            >
              {step === 3 ? "ثبت اطلاعات" : "ادامه"}
            </button>
          </form>
        </FormProvider>
      </div>
    </div>
  );
}
